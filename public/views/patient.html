<h2>🧑‍⚕️ Patients</h2>

<!-- ✅ Patient Add Form -->
<form ng-submit="addPatient()">
  <input type="text" ng-model="newPatient.name" placeholder="Name" required />
  <input type="number" ng-model="newPatient.age" placeholder="Age" required />

  <!-- Gender Dropdown -->
  <select ng-model="newPatient.gender" required>
    <option value="" disabled selected>Select Gender</option>
    <option value="Male">Male</option>
    <option value="Female">Female</option>
    <option value="Other">Other</option>
  </select>

  <button type="submit">Add Patient</button>
</form>

<hr />

<h3>List of Patients</h3>

<!-- ✅ 🔍 Search Bar -->
<input
  type="text"
  ng-model="searchPatient"
  placeholder="🔍 Search patients by name, age or gender..."
  style="margin-bottom: 10px; padding: 5px; width: 50%;"
/>

<!-- ✅ Table + Filter -->
<table border="1" cellpadding="5">
  <tr>
    <th>Name</th>
    <th>Age</th>
    <th>Gender</th>
    <th>Actions</th>
  </tr>

  <!-- ✅ Applying filter to the ng-repeat -->
  <tr ng-repeat="pat in patients | filter:customPatientFilter">
    <td>{{ pat.name }}</td>
    <td>{{ pat.age }}</td>
    <td>{{ pat.gender }}</td>
    <td>
      <button ng-click="editPatient(pat)">Edit</button>
      <button ng-click="deletePatient(pat._id)">Delete</button>
    </td>
  </tr>
</table>

<!-- ✅ Edit Form (if editing) -->
<div ng-if="editingPatient">
  <h3>Edit Patient</h3>
  <form ng-submit="updatePatient()">
    <input type="text" ng-model="editingPatient.name" required />
    <input type="number" ng-model="editingPatient.age" required />

    <!-- Gender Dropdown -->
    <select ng-model="editingPatient.gender" required>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>

    <button type="submit">Update</button>
    <button type="button" ng-click="editingPatient = null">Cancel</button>
  </form>
</div>
